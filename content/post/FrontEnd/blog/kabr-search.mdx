---
title: "Next.jsë¡œ ë¸”ë¡œê·¸ ì œì‘í•˜ê¸° 4"
tags:
  - nextjs
description: "Next.js ë¸”ë¡œê·¸ì˜ ê²€ìƒ‰ ê¸°ëŠ¥ì„ kbarë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤."
date: 2024-05-20
---

[Kbar docs](https://kbar.vercel.app/docs/overview 'kbar docs')

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” Next.js ë¸”ë¡œê·¸ì— Kbarë¥¼ ì´ìš©í•˜ì—¬ ê²€ìƒ‰ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. 

kbarëŠ” `Command + k` ë¡œ ë”ìš± ì˜ ì•Œë ¤ì ¸ìˆìŠµë‹ˆë‹¤.

KbarëŠ” ë¹ ë¥´ê³  ì§ê´€ì ì¸ ëª…ë ¹ íŒ”ë ˆíŠ¸(Command Palette)ë¥¼ ì œê³µí•˜ì—¬ ì‚¬ìš©ìê°€ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ë¥¼ í†µí•´ ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ì ê²½í—˜ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


## Kbar ë ˆì´ì•„ì›ƒ êµ¬ì„±

```bash
npm install kbar
```

Kbar ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•˜ê¸° ìœ„í•´ `KbarLayout` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. 

ì´ Layoutì— í•„ìš”í•œ ê¸°ëŠ¥ì— ëŒ€í•´ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

|ì»´í¬ë„ŒíŠ¸ / ê¸°ëŠ¥|	ì„¤ëª…|
|---|---|
|KBarProvider	|Kbarì˜ ëª¨ë“  ì„¤ì •ê³¼ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ actionsë¥¼ ì „ë‹¬í•˜ì—¬ Kbarê°€ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.|
|KBarPortal	|Kbarì˜ ëª¨ë‹¬ì„ ë Œë”ë§í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI)ì˜ ë‹¤ë¥¸ ë¶€ë¶„ê³¼ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.|
|KBarPositioner	|Kbar ëª¨ë‹¬ì˜ ìœ„ì¹˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. í™”ë©´ ì¤‘ì•™ì— ê³ ì •ë˜ê³ , ë°°ê²½ì„ ë¸”ëŸ¬ ì²˜ë¦¬í•˜ì—¬ í¬ì»¤ìŠ¤ë¥¼ ë§ì¶”ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.|
|KBarAnimator|	Kbar ëª¨ë‹¬ì˜ ì• ë‹ˆë©”ì´ì…˜ê³¼ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ëª¨ë‹¬ì˜ í¬ê¸°, ìƒ‰ìƒ, ê·¸ë¦¼ì ë“±ì„ ì„¤ì •í•©ë‹ˆë‹¤.|
|KBarSearch	|Kbar ê²€ìƒ‰ ì…ë ¥ í•„ë“œì…ë‹ˆë‹¤. defaultPlaceholderë¥¼ í†µí•´ ê²€ìƒ‰ í•„ë“œì˜ ì•ˆë‚´ ë¬¸êµ¬ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.|
|RenderResults|	Kbarì˜ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë Œë”ë§í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ê²€ìƒ‰ì–´ì— ë”°ë¥¸ ê²°ê³¼ë¥¼ ë™ì ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.|
|ì•¡ì…˜|	actions ë°°ì—´ì€ ì‚¬ìš©ìê°€ Kbarë¥¼ í†µí•´ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë™ì‘ì„ ì •ì˜í•©ë‹ˆë‹¤. ê° ì•¡ì…˜ì€ ID, ì´ë¦„, í‚¤ì›Œë“œ, ì„¹ì…˜, ì‹¤í–‰ í•¨ìˆ˜, ì•„ì´ì½˜, ë‹¨ì¶•í‚¤ ë“±ì„ í¬í•¨í•©ë‹ˆë‹¤.|

---

ì œê°€ ì‘ì„±í•œ `KbarLayout.tsx`ëŠ” í…Œë§ˆ ë³€ê²½, ë„¤ë¹„ê²Œì´ì…˜ì„ í¬í•¨í•œ ì•¡ì…˜ê³¼ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ê²Œ ì½”ë”©í•˜ì˜€ìŠµë‹ˆë‹¤.

ì•¡ì…˜ì´ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ì„ í•˜ê³  ê²€ìƒ‰ ì¸ë±ìŠ¤ë¥¼ ì•¡ì…˜ê³¼ ë”í•˜ì—¬ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

ì œ ê²½ìš° searchIndexë¥¼ veliteë¡œ ìƒì„±í•œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ì ìœ¼ë¡œ ìƒì„±, ê¸°ë³¸ ì•¡ì…˜ê³¼ concatí•˜ì˜€ìŠµë‹ˆë‹¤.

```javascript:KbarLayout.tsx
'use client';

import { KBarAnimator, KBarPortal, KBarPositioner, KBarSearch, KBarProvider, Action } from "kbar";
import RenderResults from "@/components/kbar/kbar-result";
import { useRouter } from "next/navigation";
import { useTheme } from 'next-themes';
import toast from "react-hot-toast";
import {
  FaHome,
  FaBook,
  FaSun,
  FaMoon,
  FaSearch,
} from "react-icons/fa";
import { posts } from "#site/content";
import { formatDate } from "@/lib/utils";

// KbarLayout ì»´í¬ë„ŒíŠ¸ ì •ì˜
export default function KbarLayout({ children }: { children: React.ReactNode }) {
  const { setTheme } = useTheme(); // í…Œë§ˆ ë³€ê²½ì„ ìœ„í•œ í›…
  const router = useRouter(); // í˜ì´ì§€ ì´ë™ì„ ìœ„í•œ ë¼ìš°í„° í›…

  // í¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²€ìƒ‰ ì¸ë±ìŠ¤ ìƒì„±
  const searchIndex = posts.map(post => ({
    id: post.slug,
    name: post.title,
    subtitle: formatDate(post.date),
    perform: () => router.push('/' + post.slug), // í´ë¦­ ì‹œ í•´ë‹¹ í¬ìŠ¤íŠ¸ë¡œ ì´ë™
    parent: "post",
    section: 'post',
  }));

  // Kbar ì•¡ì…˜ ì •ì˜
  const actions: Action[] = [
    {
      id: "homeAction",
      name: "Home",
      shortcut: ["h"],
      keywords: "back",
      section: "Navigation",
      perform: () => router.push("/"), // ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™
      icon: <FaHome className="w-6 h-6 mx-3" />,
      subtitle: "ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°",
    },
    {
      id: "aboutAction",
      name: "About",
      shortcut: ["a"],
      keywords: "about",
      section: "Navigation",
      icon: <FaBook className="w-6 h-6 mx-3" />,
      perform: () => router.push("/about"), // About í˜ì´ì§€ë¡œ ì´ë™
      subtitle: "About í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°",
    },
    {
      id: "post",
      name: "Search Post",
      keywords: "search articles",
      section: "post",
      icon: <FaSearch className="w-6 h-6 mx-3" />,
      subtitle: "í¬ìŠ¤íŠ¸ ì‚´í´ë³´ê¸°",
    },
    {
      id: "darkTheme",
      name: "Dark",
      keywords: "dark theme",
      shortcut: ["d"],
      section: "Theme",
      perform: () => {
        setTheme("dark"); // ë‹¤í¬ëª¨ë“œë¡œ ë³€ê²½
        toast.success(`í…Œë§ˆê°€ ë‹¤í¬ëª¨ë“œë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`, {
          icon: "ğŸ‘",
          style: {
            borderRadius: "10px",
            background: "#333",
            color: "#fff",
          },
        });
      },
      icon: <FaMoon className="w-6 h-6 mx-3" />,
      subtitle: "ë‹¤í¬ëª¨ë“œë¡œ ë³€ê²½í•˜ê¸°",
    },
    {
      id: "lightTheme",
      name: "Light",
      keywords: "light theme",
      shortcut: ["l"],
      section: "Theme",
      perform: () => {
        setTheme("light"); // ë¼ì´íŠ¸ëª¨ë“œë¡œ ë³€ê²½
        toast.success(`í…Œë§ˆê°€ ë¼ì´íŠ¸ëª¨ë“œë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`, {
          icon: "ğŸ‘",
          style: {
            borderRadius: "10px",
            background: "#333",
            color: "#fff",
          },
        });
      },
      icon: <FaSun className="w-6 h-6 mx-3" />,
      subtitle: "ë¼ì´íŠ¸ëª¨ë“œë¡œ ë³€ê²½í•˜ê¸°",
    },
  ];

  // ì•¡ì…˜ê³¼ ê²€ìƒ‰ ì¸ë±ìŠ¤ë¥¼ ê²°í•©
  const combinedActions = actions.concat(searchIndex);

  return (
    <KBarProvider actions={combinedActions}>
      <KBarPortal>
        <KBarPositioner className="fixed left-0 right-0 h-full w-full bg-white/60 backdrop-blur-sm dark:bg-black/50">
          <KBarAnimator className="max-w-3xl w-full sm:w-1/2 overflow-hidden rounded-lg shadow-xl border bg-slate-100 dark:bg-slate-900"
            style={{ boxShadow: '0 16px 70px rgb(0 0 0 / 20%)' }}>
            <KBarSearch
              className="bg-slate-100 dark:bg-slate-900 w-full border-none px-6 py-4 text-slate-600 outline-none placeholder:text-slate-400"
              defaultPlaceholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." // placeholder ì„¤ì •
            />
            <div className="kbar-scrollbar pb-4 mt-2">
              <RenderResults />
            </div>
          </KBarAnimator>
        </KBarPositioner>
      </KBarPortal>
      {children}
    </KBarProvider>
  );
}
```

ê²€ìƒ‰ ë²„íŠ¼ êµ¬í˜„

ë‹¤ìŒì€ Kbarë¥¼ ì—¬ëŠ” ê²€ìƒ‰ ë²„íŠ¼ì„ êµ¬í˜„í•œ KBarButton ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. Kbarë¥¼ ì—´ê³  ë‹«ëŠ” ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

```javascript:KbarButton.tsx
'use client';
import { cn } from '@/lib/utils';
import { useKBar } from 'kbar';
import { Search } from 'lucide-react';
import { Button } from '@/components/ui/button';

interface KBarButtonProps {
  isMobile?: boolean
}

export default function KBarButton({ isMobile = false }: KBarButtonProps) {
  const { query } = useKBar();

  return (
    <>
      {isMobile ?
        <Button variant="ghost" className="w-10 px-0 flex sm:hidden" onClick={query.toggle} >
          <span className="sr-only">Mobile search button</span>
          <Search className="size-5" />
        </Button>
        :
        <>
          <button
            className={cn(
              'hidden md:flex cursor-pointer items-center rounded-lg p-1 text-xs ',
              'bg-secondary transition-colors dark:bg-slate-800 dark:hover:bg-slate-800/70 hover:bg-slate-200/80',
            )}
            onClick={query.toggle}
          >
            <span className="sr-only">Search button</span>
            <span className="px-3">Search...</span>
            <div
              className={cn(
                'ml-auto rounded-lg px-2 py-1',
                'bg-slate-300/80 dark:bg-slate-700 border transition-colors dark:border-neutral-800',
              )}
            >
              âŒ˜ + K
            </div>
          </button>
          <Button variant="ghost" className="w-10 px-0 flex md:hidden" onClick={query.toggle} >
            <span className="sr-only">Mobile search button</span>
            <Search className="size-5" />
          </Button>
        </>
      }
    </>
  );
}

```

## ê²°ê³¼ ë Œë”ë§ ì»´í¬ë„ŒíŠ¸

ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë Œë”ë§í•˜ëŠ” RenderResults ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì´ ì»´í¬ë„ŒíŠ¸ëŠ” Kbarì˜ useMatches í›…ì„ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì–»ê³ , ì´ë¥¼ í™”ë©´ì— ë Œë”ë§í•©ë‹ˆë‹¤.

```javascript:KbarResult.tsx
import { KBarResults, useMatches } from "kbar";
import { cn } from "@/lib/utils";

export default function RenderResults() {
  const { results } = useMatches();

  return (
    <KBarResults
      items={results}
      onRender={({ item, active }) =>
        typeof item === 'string' ? (
          <div className="text-slate-700 dark:text-slate-300 mx-3 py-2 text-sm">{item}</div>
        ) : (
          <div
            className={cn(
              'mx-3 flex cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors',
              active && 'bg-slate-200/70 dark:bg-slate-800',
            )}
          >
            {item.icon && item.icon}
            <div className="flex flex-col font-medium">
              <div>{item.name}</div>
              {item.subtitle && (
                <span className="text-slate-700 dark:text-slate-300 text-xs font-normal">{item.subtitle}</span>
              )}
            </div>
            {item.shortcut?.length && (
              <div className="ml-auto flex gap-2">
                {item.shortcut.map((sc) => (
                  <kbd
                    key={sc}
                    className="rounded-md px-2 py-1 text-xs"
                    style={{
                      background: 'rgba(0 0 0 / .2)',
                    }}
                  >
                    {sc}
                  </kbd>
                ))}
              </div>
            )}
          </div>
        )
      }
    />
  )
}

```

## ë ˆì´ì•„ì›ƒì— Kbar ì ìš©í•˜ê¸°

`layout.tsx` íŒŒì¼ì— Kbar ë ˆì´ì•„ì›ƒì„ ì ìš©í•©ë‹ˆë‹¤. `KbarLayout`ì„ ì¶”ê°€í•˜ê³  ì›í•˜ëŠ” ìœ„ì¹˜ì— `KBarButton`ì„ ì¶”ê°€í•˜ê³ , ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

- KbarButtonì€ KbarLayout ì•ˆì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

- ì•Œë¦¼ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ë©´ Toasterë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

```javascript:layout.tsx
import KbarLayout from "@/components/kbar/kbar-layout";
import { Toaster } from "react-hot-toast";

...

  <KbarLayout >
    <KBarButton />
        <main>{children}</main>
        <Toaster
          toastOptions={{
            position: "bottom-center",
          }}
        />
  </KbarLayout>
```

## useRegisterActions

`searchIndex` ë°ì´í„°ë¥¼ ì••ì¶•í•˜ì—¬ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì••ì¶•ì„ í•´ì œí•´ì„œ ì‚¬ìš©í•˜ê±°ë‚˜, í˜ì´ì§€ë³„ë¡œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë ¤ë©´ ë™ì  ì•¡ì…˜(dynamic actions)ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. 

ì´ëŠ” `useRegisterActions`ë¥¼ í†µí•´ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë‹¤ìŒì€ `useRegisterActions`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤.

```javascript
'use client';

import { useState } from "react";
import { Action, useRegisterActions } from "kbar";

export default function Example() {
  const [searchIndex, setSearchIndex] = useState<Action[]>([]);

  // searchIndexê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì•¡ì…˜ì„ ë“±ë¡
  useRegisterActions(searchIndex, [searchIndex]);

  // ê¸°íƒ€ ë¡œì§ ë° ë Œë”ë§ ì½”ë“œ...
}
```